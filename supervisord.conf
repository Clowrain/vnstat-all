[supervisord]
nodaemon=true
user=root

# 1. vnStat 后台服务
[program:vnstatd]
command=/usr/sbin/vnstatd -n
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0

# 2. Python API 服务器
# -u 参数禁用缓存，确保日志实时输出
[program:server]
command=/usr/bin/python3 -u /server.py
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0

# 3. 流量平衡脚本
[program:balancer]
command=/bin/bash /balancer.sh
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
